(this["webpackJsonpperez-barber-shop"]=this["webpackJsonpperez-barber-shop"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var r,c,a,i,s,o,u,l,j,d,b=n(1),m=n(16),x=n.n(m),p=(n(88),n(17)),h=n(18),O=(n(89),n(30)),f=n.p+"static/media/barberlogo.f2e24360.png",g=(n(90),n(135)),v=n(76),y=n.n(v),C=n(144),k=n(136),w=n(13),N=n.n(w),I=n(27),q=n(20),E=n(132),z=n(77),B=n(22),F=n(71),A=(n(104),F.a.initializeApp({apiKey:"AIzaSyCCztLzk3AMOKT2GQuoNYzTjbZE3iQWKIs",authDomain:"shop-coderhouse.firebaseapp.com",databaseURL:"https://shop-coderhouse.firebaseio.com",projectId:"shop-coderhouse",storageBucket:"shop-coderhouse.appspot.com",messagingSenderId:"986002407413",appId:"1:986002407413:web:3e5489077c41c6b5a26abc",measurementId:"G-N6V7NVNMMN"})),S=n(2),D=n(1),T=D.createContext,L=D.useState,P=T(),$=function(e){var t=e.children,n=e.defaultCart,r=void 0===n?[]:n,c=L(0),a=Object(q.a)(c,2),i=a[0],s=a[1],o=L([]),u=Object(q.a)(o,2),l=u[0],j=u[1],d=L(!1),b=Object(q.a)(d,2),m=b[0],x=b[1],p=L({firstName:"",lastName:"",cellphone:"",email:""}),h=Object(q.a)(p,2),O=h[0],f=h[1],g=L(""),v=Object(q.a)(g,2),y=v[0],C=v[1],k=function(){var e=Object(I.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.firestore().collection("items").get();case 2:return t=e.sent,e.abrupt("return",t.docs.map((function(e){return Object(B.a)(Object(B.a)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(I.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.firestore().collection("items").where("category","==",t).get();case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return Object(B.a)(Object(B.a)({},e.data()),{},{docId:e.id})})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(I.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.firestore().collection("items").doc(t).get();case 2:return n=e.sent,e.abrupt("return",Object(B.a)(Object(B.a)({},n.data()),{},{docId:n.id}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(I.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A.firestore(),e.prev=1,e.next=4,n.collection("checkout").add(t);case 4:return r=e.sent,e.abrupt("return",r.id);case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return l.some((function(t){return t.item.id===e}))};return Object(S.jsx)(P.Provider,{value:{cartOpen:m,setCartOpen:x,quantity:i,setQuantity:s,cartItems:l,addItem:function(e){var t=e.item,n=e.quantity,r=t.id;D(r)?l.find((function(e){return e.item.id===r})).quantity+=n:j([].concat(Object(z.a)(l),[{item:t,quantity:n}]))},removeItem:function(e){if(D(e)){var t=l.find((function(t){return t.item.id===e}));1===t.quantity?j(l.filter((function(t){return t.item.id!==e}))):t.quantity-=1}},clear:function(){s(0),j(r)},calculateTotal:function(e){return e.reduce((function(e,t){var n=t.item;return e+t.quantity*n.price}),0)},createOrder:F,getItemsFromFirebase:k,getItemsByCategory:w,getItemByDocId:E,buyerData:O,setBuyerData:f,formError:y,setFormError:C},children:t})},H=h.a.div(r||(r=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  font-family: Arial, Helvetica, sans-serif;\n  border-bottom: 1px solid lightblue;\n  padding-bottom: 20px;\n\n  div {\n    flex: 1;\n  }\n\n  .information, .buttons {\n    display: flex;\n    justify-content: space-between;\n  }\n\n  img\xa0 {\n    max-width: 80px;\n    object-fit: cover;\n    margin-left: 40px;\n  }\n"]))),Q=function(e){var t=e.cartItem,n=Object(b.useState)(!1),r=Object(q.a)(n,2),c=r[0],a=r[1],i=Object(b.useContext)(P),s=i.quantity,o=i.setQuantity,u=i.addItem,l=i.removeItem,j=i.cartItems,d=t.item,m=d.id,x=d.title,p=d.price,h=d.image,O=d.stock,f=t.item;return Object(S.jsxs)(H,{children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:x}),Object(S.jsxs)("div",{className:"information",children:[Object(S.jsxs)("p",{children:["Price: $",p]}),Object(S.jsxs)("p",{children:["Total: $",(t.quantity*p).toFixed(2)]})]}),Object(S.jsxs)("div",{className:"buttons",children:[Object(S.jsx)(E.a,{size:"small",disableElevation:!0,variant:"contained",onClick:function(){return function(e){a(!1),o(s-1),l(e)}(m)},children:"-"}),Object(S.jsx)("p",{children:t.quantity}),Object(S.jsx)(E.a,{size:"small",disableElevation:!0,variant:"contained",onClick:function(){return function(e,t){var n=e.id,r=j.find((function(e){return e.item.id===n}));O>r.quantity?(o(s+t),u({item:e,quantity:t})):a(!0)}(f,1)},disabled:c,children:"+"})]})]}),Object(S.jsx)("img",{src:h,alt:x})]})},M=h.a.input(c||(c=Object(p.a)(["\npadding: 0.5em;\ncolor: #ee402c;\nbackground: papayawhip;\nborder: none;\nborder-radius: 3px;\nwidth: 100%;\nmargin-bottom: 0.5em;\n"]))),J=h.a.label(a||(a=Object(p.a)(["\nmargin-bottom: 0.5em;\ncolor: palevioletred;\ndisplay: block;\n"]))),K=function(){var e=Object(b.useContext)(P),t=e.buyerData,n=e.setBuyerData,r=e.formError;return Object(S.jsxs)("form",{children:[Object(S.jsx)("h4",{children:"Datos de compra: "}),Object(S.jsx)(M,{name:"firstName",placeholder:"First name",value:t.firstName,onChange:function(e){return n(Object(B.a)(Object(B.a)({},t),{},{firstName:e.target.value}))}}),Object(S.jsx)("br",{}),Object(S.jsx)(M,{name:"lastName",placeholder:"Last name",value:t.lastName,onChange:function(e){return n(Object(B.a)(Object(B.a)({},t),{},{lastName:e.target.value}))}}),Object(S.jsx)("br",{}),Object(S.jsx)(M,{name:"cellphone",placeholder:"Cell phone",value:t.cellphone,onChange:function(e){return n(Object(B.a)(Object(B.a)({},t),{},{cellphone:e.target.value}))}}),Object(S.jsx)("br",{}),Object(S.jsx)(M,{name:"email",placeholder:"Email",value:t.email,onChange:function(e){return n(Object(B.a)(Object(B.a)({},t),{},{email:e.target.value}))}}),Object(S.jsx)("br",{}),Object(S.jsx)(J,{children:r})]})},V=n(75),Z=n.n(V),G=h.a.aside(i||(i=Object(p.a)(["\n  font-family: Arial, Helvetica, sans-serif;\n  width: 500px;\n  padding: 20px;\n"]))),R=Object(h.a)(g.a)(s||(s=Object(p.a)(["\n  position: fixed;\n  z-index: 100;\n  right: 20px;\n  top: 20px;\n"]))),W=function(){var e=Object(b.useState)(!1),t=Object(q.a)(e,2),n=t[0],r=t[1],c=Object(b.useContext)(P),a=c.createOrder,i=c.cartItems,s=c.calculateTotal,o=c.clear,u=c.setCartOpen,l=c.buyerData,j=c.setFormError,d=function(e){for(var t in e){if(!e[t])return j("El campo ".concat(t," es requerido"));j("")}},m=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},x=function(){var e=Object(I.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),d(l),!(l.firstName&&l.lastName&&l.cellphone)||m(l.email)){e.next=4;break}return e.abrupt("return",j("Por favor ingrese un correo valido"));case 4:if(!(l.firstName&&l.lastName&&l.cellphone&&m(l.email))){e.next=14;break}return e.next=7,i.map((function(e){var t=e.item,n=e.quantity;return{id:t.id,title:t.title,price:t.price,quantity:n}}));case 7:return n=e.sent,e.next=10,a({buyer:{name:"".concat(l.firstName," ").concat(l.lastName),phone:l.cellphone,email:l.email},items:n,date:new Date,total:s(i).toFixed(2)});case 10:r=e.sent,alert("Su numero de orden creada existosamente es: ".concat(r)),o(),u(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(G,{children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("h2",{children:"Your shopping cart"}),Object(S.jsx)(R,{onClick:function(){window.confirm("\xbfEstas seguro que deseas vaciar tu carrito?")&&o()},children:Object(S.jsx)(Z.a,{})})]}),0===i.length?Object(S.jsx)("p",{children:"Not items in the cart."}):null,i.map((function(e){return Object(S.jsx)(Q,{cartItem:e},e.item.id)})),Object(S.jsxs)("h2",{children:["Total: $",s(i).toFixed(2)]}),Object(S.jsxs)("div",{children:[n?Object(S.jsx)(K,{}):"",n?Object(S.jsx)(E.a,{variant:"outlined",onClick:x,children:"Realizar Compra"}):Object(S.jsx)(E.a,{variant:"outlined",onClick:function(){return r(!0)},children:"Crear Orden"})]})]})},Y=Object(h.a)(g.a)(o||(o=Object(p.a)(["\n  position: fixed;\n  z-index: 100;\n  right: 20px;\n  top: 20px;\n"]))),U=function(){var e=Object(b.useContext)(P),t=e.quantity,n=e.cartOpen,r=e.setCartOpen;return Object(S.jsx)(S.Fragment,{children:t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(C.a,{anchor:"right",open:n,onClose:function(){return r(!1)},children:Object(S.jsx)(W,{})}),Object(S.jsx)(Y,{onClick:function(){return r(!0)},children:Object(S.jsx)(k.a,{badgeContent:t,color:"error",children:Object(S.jsx)(y.a,{})})})]}):""})},X=n(137),_=function(){var e=["\ud83d\udcbb","\ud83d\udc8e","\ud83d\udc55","\ud83d\udc57"];return Object(S.jsxs)("header",{className:"navBar",children:[Object(S.jsx)(X.a,{}),Object(S.jsx)(O.b,{to:"/",children:Object(S.jsx)("img",{src:f,className:"barberLogo",alt:"logo"})}),Object(S.jsx)("div",{className:"categoriesDiv",children:Object(S.jsx)("ul",{className:"categories",children:["Electronics","Jewelery","Men's clothing","Women's clothing"].map((function(t,n){return Object(S.jsx)(O.c,{to:"/category/".concat(t.toLowerCase()),activeStyle:{color:"red"},className:"navLink",children:Object(S.jsxs)("li",{className:"category",children:[e[n],Object(S.jsxs)("p",{children:[" ",t," "]})]})},t.toLowerCase())}))})}),Object(S.jsx)(U,{})]})},ee=(n(98),n.p+"static/media/coderhouse.c1d3c866.png"),te=n(10),ne=n(138),re=h.a.div(u||(u=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  width: 95%;\n  border: 1px solid lightblue;\n  border-radius: 20px;\n  height: 100%;\n  margin: 0 5px 0 10px;\n\n  button {\n    border-radius: 0 0 20px 20px;\n  }\n\n  img {\n    max-height: 220px;\n    object-fit: cover;\n    border-radius: 20px 20px 0 0;\n  }\n\n  div {\n    font-family: Arial, Helvetica, sans-serif;\n    padding: 1rem;\n    height: 100%;\n  }\n\n  .skeletonImage {\n    justify-content: center;\n  }\n"]))),ce=function(e){var t=e.item,n=Object(te.f)(),r=t.docId,c=t.title,a=t.description,i=t.price,s=t.image;return Object(S.jsxs)(re,{children:[s?Object(S.jsx)("img",{src:s,alt:"Product"}):Object(S.jsx)(ne.a,{className:"skeletonImage",variant:"rect",width:350,height:200}),Object(S.jsxs)("div",{children:[Object(S.jsx)("h3",{children:Object(S.jsxs)(O.b,{to:"/item/".concat(r),className:"itemLink",children:[" ",c," "]})}),Object(S.jsxs)("p",{children:[" ",a," "]}),Object(S.jsxs)("h3",{children:["$ ",i," "]})]}),Object(S.jsx)(E.a,{onClick:function(){return n.push("/item/".concat(r))},children:"Ver detalle"})]})},ae=n(139),ie=h.a.div(l||(l=Object(p.a)(["\n  button {\n    border-radius: 0 0 20px 20px;\n  }"]))),se=function(e){var t=e.items;return Object(S.jsx)(ie,{children:Object(S.jsx)(ae.a,{container:!0,spacing:3,children:t.map((function(e){return Object(S.jsx)(ae.a,{item:!0,xs:12,sm:4,children:Object(S.jsx)(ce,{item:e})},e.id)}))})})},oe=function(e){var t=e.greeting,n=Object(te.g)().id,r=Object(b.useState)([]),c=Object(q.a)(r,2),a=c[0],i=c[1],s=Object(b.useContext)(P),o=s.getItemsFromFirebase,u=s.getItemsByCategory,l=function(){var e=Object(I.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(I.a)(N.a.mark((function e(n,r){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,u(t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,o();case 8:e.t0=e.sent;case 9:c=e.t0,setTimeout((function(){n(c)}),1e3);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.useEffect)((function(){l(n).then((function(e){i(e)})).catch((function(e){return alert("Error obteniendo los datos...",e)}))}),[n]),Object(S.jsxs)("section",{className:"itemListContainer",children:[Object(S.jsx)("p",{children:t}),a.length?Object(S.jsx)(se,{items:a}):Object(S.jsx)(b.Fragment,{children:Object(S.jsx)("img",{src:ee,className:"logo-loader",alt:"logo"})})]})},ue=(n(99),n(100),function(e){var t=e.initial,n=void 0===t?1:t,r=e.stock,c=e.onAdd,a=Object(b.useState)(n),i=Object(q.a)(a,2),s=i[0],o=i[1],u=function(e){"+"===e?r>s&&o(s+1):"-"===e&&s>1&&o(s-1)};return Object(S.jsxs)("div",{className:"itemCountContainer",children:[Object(S.jsxs)("div",{className:"itemCount",children:[Object(S.jsx)("button",{onClick:function(){u("-")},children:"-"}),Object(S.jsx)("p",{children:s}),Object(S.jsx)("button",{onClick:function(){u("+")},children:"+"})]}),Object(S.jsx)("button",{disabled:!r,onClick:function(){return c({quantityToAdd:s})},children:"Agregar al carrito"})]})}),le=(n(101),n(140)),je=n(141),de=n(143),be=n(142),me=h.a.div(j||(j=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 90%;\n  border: 1px solid lightblue;\n  border-radius: 20px;\n  height: 100%;\n  padding: 10px;\n  margin: 10px;\n\n  img {\n    max-height: 350px;\n    object-fit: cover;\n    border-radius: 20px 20px 0 0;\n  }\n\n  div {\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 15px;\n    height: 100%;\n  }\n\n  .bodyCartItemSkeleton {\n    width: 350px;\n  }\n  .skeletonImage {\n    justify-content: center;\n  }\n\n  .finishBuying {\n    border-radius: 5px;\n    background-color: cadetblue;\n    text-align: center;\n    margin-bottom: 30px;\n  }\n\n  .continueBuying {\n    border-radius: 5px;\n    background-color: skyblue;\n    text-align: center;\n    margin-bottom: 30px;\n  }\n"]))),xe=function(e){var t=e.item,n=Object(te.f)(),r=Object(b.useState)(!1),c=Object(q.a)(r,2),a=c[0],i=c[1],s=Object(b.useContext)(P),o=s.quantity,u=s.setQuantity,l=s.addItem,j=s.setCartOpen,d=t.docId,m=t.title,x=t.description,p=t.price,h=t.image,f=t.stock;return Object(S.jsxs)(b.Fragment,{children:[Object(S.jsx)(X.a,{}),Object(S.jsx)(le.a,{className:"cardItem",children:Object(S.jsxs)(me,{children:[Object(S.jsx)(je.a,{children:h?Object(S.jsx)(be.a,{component:"img",alt:x,height:"250",image:h,title:m}):Object(S.jsx)(ne.a,{className:"skeletonImage",variant:"rect",width:350,height:200})}),m?Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:Object(S.jsxs)(O.b,{to:"/item/".concat(d),className:"itemLink",children:[" ",m," "]})}),Object(S.jsxs)("p",{children:[" ",x," "]}),Object(S.jsxs)("h3",{children:["$ ",p," "]})]}):Object(S.jsxs)("div",{className:"bodyCartItemSkeleton",children:[Object(S.jsx)(ne.a,{}),Object(S.jsx)(ne.a,{animation:!1}),Object(S.jsx)(ne.a,{animation:"wave"})]}),Object(S.jsxs)(de.a,{children:[m&&!a?Object(S.jsx)(ue,{stock:f,initial:1,onAdd:function(e){var n=e.quantityToAdd;i(!0),u(o+n),l({item:t,quantity:n})}}):"",m&&a&&o?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("button",{className:"finishBuying",disabled:!f,onClick:function(){return j(!0)},children:"Terminar compra"}),Object(S.jsx)("button",{className:"continueBuying",onClick:function(){return n.push("/")},children:"Continuar comprando"})]}):""]})]})})]})},pe=function(e){var t=e.greeting,n=Object(te.g)().id,r=Object(b.useState)({}),c=Object(q.a)(r,2),a=c[0],i=c[1],s=Object(b.useContext)(P).getItemByDocId;return Object(b.useEffect)((function(){new Promise(function(){var e=Object(I.a)(N.a.mark((function e(t,r){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(n);case 2:c=e.sent,setTimeout((function(){t(c)}),1e3);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(e){e.title?i(e):alert("Error el id del producto no existe en firebase...")})).catch((function(e){return alert("Error obteniendo un producto ...",e)}))}),[n]),Object(S.jsxs)("section",{className:"itemDetailContainer",children:[Object(S.jsx)("p",{children:t}),Object(S.jsx)(xe,{item:a})]})},he=h.a.div(d||(d=Object(p.a)([""]))),Oe=function(){var e="Hola \ud83d\udc4b\ud83c\udffd , \xa1Bienvenido a tu Barber Shop!";return Object(S.jsx)($,{children:Object(S.jsx)(O.a,{children:Object(S.jsxs)(he,{children:[Object(S.jsx)(_,{}),Object(S.jsxs)(te.c,{children:[Object(S.jsx)(te.a,{exact:!0,path:"/",children:Object(S.jsx)(oe,{greeting:e})}),Object(S.jsx)(te.a,{exact:!0,path:"/category/:id",children:Object(S.jsx)(oe,{greeting:e})}),Object(S.jsx)(te.a,{exact:!0,path:"/item/:id",children:Object(S.jsx)(pe,{greeting:e})}),Object(S.jsx)(te.a,{exact:!0,path:"/cart",children:Object(S.jsx)(W,{})})]})]})})})};x.a.render(Object(S.jsx)($,{children:Object(S.jsx)(Oe,{})}),document.getElementById("root"))},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.70fd66e6.chunk.js.map